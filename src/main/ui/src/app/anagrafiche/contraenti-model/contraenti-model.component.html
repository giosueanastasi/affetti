<div class="modal fade" id="contraentiModal" tabIndex="-1">
    <div class="modal-dialog col-8">
        <div class="modal-content">
            <form #f="ngForm" >
                 <div class="modal-header">
                    <h4 class="modal-title">Contraente</h4>
                    <button button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                 </div>
                 <div class="modal-body d-flex flex-wrap justify-content-between">

                    <div class="alert alert-danger" *ngIf="errorMessage">
                        <strong>Error!</strong>{{errorMessage}}
                    </div>
                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3"  for="cognome">Cognome</label>
                        <input 
                            type="text" 
                            id="cognome" 
                            name="cognome"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.cognome"
                            #cognome="ngModel"
                            required
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !cognome.valid">
                            Campo Obbligatorio
                        </div>
                    </div>


                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="nome">Nome</label>
                        <input 
                            type="text" 
                            id="nome" 
                            name="nome"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.nome"
                            #nome="ngModel"
                            required
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !nome.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="comune_nascita">Comune di Nascita</label>
                        <input 
                            type="text" 
                            id="comune_nascita" 
                            name="comune_nascita"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.comune_nascita"
                            #comune_nascita="ngModel"
                            required
                            list="optlist"
                            placeholder="Cerca il comune"
                            (change)="onComuneNascSelect($event.target.value)"
                            
                            >
                            <datalist id="optlist">
                                <select class="form-select" >
                                    <option *ngFor="let comune of comuni" [value]=comune.nome >{{comune.nome}}</option>
                                </select>
                            </datalist>
                        <div class="alert-danger" *ngIf="f.submitted && !comune_nascita.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="provincia_nascita">Provincia di Nascita</label>
                        <input 
                            type="text" 
                            id="provincia_nascita" 
                            name="provincia_nascita"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.provincia_nascita"
                            #provincia_nascita="ngModel"
                            [value]=comuneNasc.provincia 
                            required
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !provincia_nascita.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="stato_nascita">Stato di Nascita</label>
                        <input 
                            type="text" 
                            id="stato_nascita" 
                            name="stato_nascita"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.stato_nascita"
                            #stato_nascita="ngModel"
                            required
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !stato_nascita.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                     <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="data_nascita">Data di Nascita</label>
                        <input 
                            type="date" 
                            id="data_nascita" 
                            name="data_nascita"
                            class="form-control mx-3"
                            ng-model="answers.dob"
                            [(ngModel)]="contraente.data_nascita"
                            #data_nascita="ngModel"
                            required
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !data_nascita.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="comune_residenza">Comune di Residenza</label>
                        <input 
                            type="text" 
                            id="comune_residenza" 
                            name="comune_residenza"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.comune_residenza"
                            #comune_residenza="ngModel"
                            list="optlist"
                            placeholder="Cerca il comune"
                            (change)="onComuneResSelect($event.target.value)"
                            
                            required
                            >
                            <datalist id="optlist">
                                <select class="form-select" >
                                    <option *ngFor="let comune of comuni" [value]=comune.nome >{{comune.nome}}</option>
                                </select>
                            </datalist>
                        <div class="alert-danger" *ngIf="f.submitted && !comune_residenza.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="provincia_residenza">Provincia di Residenza</label>
                        <input 
                            type="text" 
                            id="provincia_residenza" 
                            name="provincia_residenza"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.provincia_residenza"
                            #provincia_residenza="ngModel"
                            [value]=comuneRes.provincia
                            required
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !provincia_residenza.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="via_residenza">Via di Residenza</label>
                        <input 
                            type="text" 
                            id="via_residenza" 
                            name="via_residenza"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.via_residenza"
                            #via_residenza="ngModel"
                            required
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !via_residenza.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="civico_residenza">Civico di Residenza</label>
                        <input 
                            type="text" 
                            id="civico_residenza" 
                            name="civico_residenza"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.civico_residenza"
                            #civico_residenza="ngModel"
                            required
                            >
                        <div class="alert-danger " *ngIf="f.submitted && !civico_residenza.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="cap_residenza">Cap di Residenza</label>
                        <input 
                            type="text" 
                            id="cap_residenza" 
                            name="cap_residenza"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.cap_residenza"
                            #cap_residenza="ngModel"
                            required
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !cap_residenza.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="telefono">Telefono</label>
                        <input 
                            type="text" 
                            id="telefono" 
                            name="telefono"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.telefono"
                            #telefono="ngModel"
                            required
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !telefono.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="codice_fiscale">Codice Fiscale</label>
                        <input 
                            type="text" 
                            id="codice_fiscale" 
                            name="codice_fiscale"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.codice_fiscale"
                            #codice_fiscale="ngModel"
                            required
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !codice_fiscale.valid">
                            Campo Obbligatorio
                        </div>
                    </div>

                    <div class="form-group col-md-6 col-12  d-flex mb-3">
                        <label class="col-lg-2 col-3" for="email">Email</label>
                        <input 
                            type="text" 
                            id="email" 
                            name="email"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.email"
                            #email="ngModel"
                            >
                        <div class="alert-danger" *ngIf="f.submitted && !email.valid">
                        </div>
                    </div>

                    <div class="form-group col-12 d-flex">
                        <label for="note">Note</label>
                        <textarea
                            type="textarea" 
                            id="note" 
                            name="note"
                            class="form-control mx-3" 
                            [(ngModel)]="contraente.note"
                            #note="ngModel"
                            ></textarea>
                        <div class="alert-danger" *ngIf="f.submitted && !note.valid">
                        </div>
                    </div>

                 </div>

                  <div class="modal-footer">
                    <button button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudi</button>
                    <button button type="button" class="btn btn-primary" (click)="saveContraente()">Salva modifiche</button></div>
            </form>
        </div>
    </div>
</div>

